<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç°¡å–®é›™é¢æ¿æ‹–æ‹½ä»‹é¢</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Font Awesome for icons -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    
    <!-- ä½¿ç”¨æ—¢æœ‰çš„ CSS æ¨£å¼ -->
    <link rel="stylesheet" href="src/style/index.css">
    <link rel="stylesheet" href="src/style/page.css">
    
</head>
<body>
	<!-- é ‚éƒ¨å°èˆª -->
	<div class="top-nav py-2">
		<div class="container">
			<div class="row justify-content-between align-items-center">
				<div class="col-auto">
					<span>å°åŒ—è‡ªä¾†æ°´äº‹æ¥­è™•</span>
				</div>
				<div class="col-auto">
					<div class="d-flex gap-3">
						<a href="#" class="text-decoration-none">ç³»çµ±èªªæ˜</a>
						<a href="#" class="text-decoration-none">æ“ä½œæ‰‹å†Š</a>
						<a href="#" class="text-decoration-none">è¯çµ¡æˆ‘å€‘</a>
					</div>
				</div>
			</div>
		</div>
	</div>
	
	<!-- ä¸»å°èˆª -->
	<header class="main-header">
		<div class="row justify-content-between align-items-center h-100 px-3">
			<div class="col-auto">
				<div class="dropdown">
					<button class="btn btn-light border dropdown-toggle" type="button" data-bs-toggle="dropdown"
						aria-expanded="false" style="border: 2px solid var(--primary-color)!important"><i
							class="fa-solid fa-table me-1"></i>ä¸»é¡Œé¸æ“‡</button>
					<ul class="dropdown-menu">
						<li><a class="dropdown-item" href="#">
								<div class="badge bg-primary me-1">åˆ—è¡¨</div>ä¾›æ°´
							</a></li>
						<li><a class="dropdown-item" href="#">
								<div class="badge bg-primary me-1">åˆ—è¡¨</div>æ·¨æ°´
							</a></li>
						<li><a class="dropdown-item" href="#">
								<div class="badge bg-primary me-1">åˆ—è¡¨</div>æ°´è³ª
							</a></li>
						<li><a class="dropdown-item" href="#">
								<div class="badge bg-primary me-1">åˆ—è¡¨</div>åˆ†å€è¨ˆé‡
							</a></li>
						<li><a class="dropdown-item" href="#">
								<div class="badge bg-primary me-1">åˆ—è¡¨</div>å¤§è¡¨è¨ˆé‡
							</a></li>
						<li>
							<hr class="dropdown-divider">
						</li>
						<li><a class="dropdown-item" href="#">åœ°åœ–</a></li>
						<li><a class="dropdown-item" href="#">åœ–è­œ</a></li>
						<li><a class="dropdown-item" href="#">ç’°æ™¯</a></li>
						<li>
							<hr class="dropdown-divider">
						</li>
						<li><a class="dropdown-item" href="#">ç·Šæ€¥æ‡‰è®Šåœ–å°</a></li>
					</ul>
				</div>
			</div>
			<div class="col-auto">
				<div class="d-flex align-items-center">
					<div class="logo me-2">ğŸ’§</div>
					<div class="site-name">æ°´ç¶²ç›£æ¸¬å¹³å°</div>
				</div>
			</div>
			<div class="col-auto">
				<button class="btn btn-outline-secondary btn-sm" onclick="showCurrentState()">é¡¯ç¤ºç‹€æ…‹</button>
				<button class="btn btn-primary btn-sm" onclick="resetPanels()">é‡ç½® 50:50</button>
			</div>
		</div>
	</header>
	<div class="main-content">
		<div id="panel-wrapper">
			<!-- Panel 1 -->
			<div id="pane1" class="panel-container" style="width: 50%;">
				<div class="panel-header">
					<div class="panel-title">
						<strong>Panel 1</strong>
					</div>
					<div class="panel-controls">
						<button class="btn btn-outline-danger btn-sm" onclick="closePanel1()" title="é—œé–‰ Panel 1">
							<i class="fas fa-times"></i>
						</button>
					</div>
				</div>
				<div class="panel-content">
					<div class="p-3">
						<strong>é¢æ¿è³‡è¨Šï¼š</strong><br>
						å¯¬åº¦: <span id="panel1-width">50%</span><br>
						ç‹€æ…‹: é¡¯ç¤ºä¸­
					</div>
				</div>
			</div>
			
			<!-- Resizer -->
			<div id="resizer" class="resizer">
				<div class="resizer-line"></div>
			</div>
			
			<!-- Panel 2 -->
			<div id="pane2" class="panel-container" style="width: 50%;">
				<div class="panel-header">
					<div class="panel-title">
						<strong>Panel 2</strong>
					</div>
					<div class="panel-controls">
						<button class="btn btn-outline-danger btn-sm" onclick="closePanel2()" title="é—œé–‰ Panel 2">
							<i class="fas fa-times"></i>
						</button>
					</div>
				</div>
				<div class="panel-content">
					<div class="p-3">
						<strong>é¢æ¿è³‡è¨Šï¼š</strong><br>
						å¯¬åº¦: <span id="panel2-width">50%</span><br>
						ç‹€æ…‹: é¡¯ç¤ºä¸­
					</div>
				</div>
			</div>
		</div>
	</div>
		
	<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
	<script src="https://cdn.datatables.net/2.3.3/js/dataTables.min.js"></script>
	<script src="https://cdn.datatables.net/2.3.3/js/dataTables.bootstrap5.min.js"></script>
	<script src="https://cdn.datatables.net/fixedcolumns/5.0.4/js/dataTables.fixedColumns.min.js"></script>
	<script src="https://cdn.datatables.net/fixedcolumns/5.0.4/js/fixedColumns.bootstrap5.min.js"></script>
	<link rel="stylesheet" href="https://cdn.datatables.net/2.3.3/css/dataTables.bootstrap5.min.css">
	<link rel="stylesheet" href="https://cdn.datatables.net/fixedcolumns/5.0.4/css/fixedColumns.bootstrap5.min.css">
	<script type="module" src="src/js/layout-modular.js"></script>
    <script type="module">
        // ç›´æ¥ä½¿ç”¨æ—¢æœ‰çš„ LayoutManager - å®Œå…¨ä¸å¯«æ–°ç¨‹å¼ç¢¼
        import { LayoutManager } from './src/js/LayoutManager.js';
        
        // å…¨åŸŸè®Šæ•¸
        let layoutManager;
        
        // ç›´æ¥ä½¿ç”¨ LayoutManager çš„æ–¹æ³•
        window.resetPanels = function() {
            if (layoutManager) {
                layoutManager.resetLayout();
            }
        };
        
        window.closePanel1 = function() {
            if (layoutManager) {
                layoutManager.togglePanel('pane1');
            }
        };
        
        window.closePanel2 = function() {
            if (layoutManager) {
                layoutManager.togglePanel('pane2');
            }
        };
        
        window.showCurrentState = function() {
            if (layoutManager) {
                const state = layoutManager.getState();
                alert(`ç›®å‰ç‹€æ…‹:\nPanel 1: ${state.pane1.width.toFixed(1)}%, visible: ${state.pane1.visible}\nPanel 2: ${state.pane2.width.toFixed(1)}%, visible: ${state.pane2.visible}`);
            }
        };
        
        // è‡ªå®šç¾©çš„é¢æ¿å¯¬åº¦é¡¯ç¤ºæ›´æ–°å‡½æ•¸
        function updateWidthDisplay() {
            if (layoutManager) {
                const state = layoutManager.getState();
                const panel1WidthSpan = document.getElementById('panel1-width');
                const panel2WidthSpan = document.getElementById('panel2-width');
                
                if (panel1WidthSpan) panel1WidthSpan.textContent = state.pane1.width.toFixed(1) + '%';
                if (panel2WidthSpan) panel2WidthSpan.textContent = state.pane2.width.toFixed(1) + '%';
            }
        }
        
        // é é¢è¼‰å…¥å®Œæˆå¾Œåˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', async function() {
            layoutManager = new LayoutManager();
            
            // è·³é createLayoutï¼Œå› ç‚º HTML ä¸­å·²ç¶“æœ‰ä½ˆå±€çµæ§‹
            // await layoutManager.init();  
            
            // æ‰‹å‹•åˆå§‹åŒ–å¿…è¦çš„éƒ¨åˆ†
            await layoutManager.contentLoader.loadPanelContents();
            layoutManager.eventHandler.bindEvents();
            layoutManager.dragHandler.bindDragEvents();
            layoutManager.applyState();
            layoutManager.updateAuxiliaryButton();
            
            // åˆå§‹æ›´æ–°å¯¬åº¦é¡¯ç¤º
            updateWidthDisplay();
            
            // ç›£è½ç‹€æ…‹è®ŠåŒ–ä¾†æ›´æ–°é¡¯ç¤º
            const originalSetState = layoutManager.setState.bind(layoutManager);
            layoutManager.setState = function(newState) {
                const result = originalSetState(newState);
                updateWidthDisplay();
                return result;
            };
            
            console.log('ç°¡å–®é›™é¢æ¿æ‹–æ‹½ä»‹é¢å·²åˆå§‹åŒ– (ç›´æ¥ä½¿ç”¨ LayoutManager.js)');
        });
    </script>
</body>
</html>